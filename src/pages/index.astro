---
import BaseLayout from '../layouts/BaseLayout.astro';
import Navigation from '../components/Navigation.astro';
import Hero from '../components/Hero.astro';
import ProjectCard from '../components/ProjectCard.astro';

const sections = [
  {
    number: 1,
    title: 'Nodes',
    description: 'Pictures of nodes for structural analysis and strength',
    link: '/section-1',
    image: 'https://images.unsplash.com/photo-1503387762-592deb58ef4e?w=800&q=80' // Fallback
  },
  {
    number: 2,
    title: 'Process Bundle',
    description: 'The bundle that shows the full process of the design presented',
    link: '/section-2',
    image: 'https://images.unsplash.com/photo-1487958449943-2429e8be8625?w=800&q=80' // Fallback
  },
  {
    number: 3,
    title: 'Photo Map',
    description: 'Explore our photo map',
    link: '/section-3',
    image: 'https://images.unsplash.com/photo-1479839672679-a46483c0e7c8?w=800&q=80' // Fallback
  },
  {
    number: 4,
    title: 'Photos',
    description: 'View our photo collection',
    link: '/section-4',
    image: 'https://images.unsplash.com/photo-1511818966892-d7d671e672a2?w=800&q=80' // Fallback
  }
];
---

<BaseLayout>
  <Navigation />
  
  <!-- Hero Section -->
  <Hero 
    title="Groep 5 - Pissebedden"
    subtitle="Doel - Scharnierpunt | KU Leuven Bachelor Ontwerp"
  >
    <!-- Fun Pissebedden Elements -->
    <div class="mt-8 flex justify-center items-center gap-4" data-aos="fade-up" data-aos-delay="600">
      <div class="flex gap-2">
        <!-- Animated Pissebedden -->
        <div class="pissebed pissebed-1">ðŸª²</div>
        <div class="pissebed pissebed-2">ðŸª²</div>
        <div class="pissebed pissebed-3">ðŸª²</div>
      </div>
      <span class="text-amber-400 font-semibold text-lg mx-4">â€¢</span>
      <div class="text-white/80 text-sm font-medium">
        Architecture Portfolio
      </div>
    </div>
  </Hero>
  
  <!-- Project Introduction - First to be seen -->
  <section id="project-intro" class="py-16 px-6 max-w-7xl mx-auto">
    <!-- Project Introduction -->
    <div class="mb-20" data-aos="fade-up">
      <div class="hinge-separator mb-12"></div>
      
      <!-- Team Introduction -->
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold mb-4 text-white" data-i18n="home.projectTitle">Doel Mobility Research Project</h2>
        <p class="text-white/70 text-lg max-w-2xl mx-auto" data-i18n="home.projectSubtitle">Sustainable canopy design for the village of Doel</p>
      </div>

      <!-- Project Details Grid -->
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
        <!-- Research & Concept -->
        <div class="bg-slate-800/30 backdrop-blur-sm border border-white/10 rounded-xl p-6">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center">
              <svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
              </svg>
            </div>
            <h3 class="text-xl font-semibold text-white" data-i18n="home.researchTitle">Research & Concept</h3>
          </div>
          <p class="text-white/70 text-sm leading-relaxed" data-i18n="home.researchDescription">
            This semester we investigated mobility in the village of Doel, designing a canopy as a meeting place where cyclists can safely park and residents can gather on integrated benches.
          </p>
        </div>

        <!-- Sustainable Materials -->
        <div class="bg-slate-800/30 backdrop-blur-sm border border-white/10 rounded-xl p-6">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center">
              <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
              </svg>
            </div>
            <h3 class="text-xl font-semibold text-white" data-i18n="home.materialsTitle">Sustainable Materials</h3>
          </div>
          <p class="text-white/70 text-sm leading-relaxed" data-i18n="home.materialsDescription">
            Our conscious choice for recycled materials, carefully selected through second-hand platforms, links sustainability to the unique character of our butterfly roof design.
          </p>
        </div>

        <!-- Technical Innovation -->
        <div class="bg-slate-800/30 backdrop-blur-sm border border-white/10 rounded-xl p-6 md:col-span-2 lg:col-span-1">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-10 h-10 bg-amber-500/20 rounded-lg flex items-center justify-center">
              <svg class="w-5 h-5 text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 8.172V5L8 4z"></path>
              </svg>
            </div>
            <h3 class="text-xl font-semibold text-white" data-i18n="home.technicalTitle">Technical Innovation</h3>
          </div>
          <p class="text-white/70 text-sm leading-relaxed" data-i18n="home.technicalDescription">
            The butterfly roof design considers rainwater drainage, while the central column efficiently directs structural forces for optimal load distribution.
          </p>
        </div>
      </div>

      <!-- Key Features -->
      <div class="bg-gradient-to-r from-slate-800/40 to-slate-700/40 backdrop-blur-sm border border-white/10 rounded-2xl p-8">
        <h3 class="text-2xl font-bold text-white mb-6 text-center" data-i18n="home.designHighlights">Design Highlights</h3>
        <div class="grid md:grid-cols-2 gap-6">
          <div class="space-y-4">
            <div class="flex items-start gap-3">
              <div class="w-6 h-6 bg-amber-400 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                <svg class="w-3 h-3 text-black" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                </svg>
              </div>
              <div>
                <h4 class="font-semibold text-white" data-i18n="home.materialSelection">Material Selection</h4>
                <p class="text-white/70 text-sm" data-i18n="home.materialSelectionDesc">Oak wood for the central column, water-resistant species treated with black stain</p>
              </div>
            </div>
            <div class="flex items-start gap-3">
              <div class="w-6 h-6 bg-amber-400 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                <svg class="w-3 h-3 text-black" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                </svg>
              </div>
              <div>
                <h4 class="font-semibold text-white" data-i18n="home.structuralAnalysis">Structural Analysis</h4>
                <p class="text-white/70 text-sm" data-i18n="home.structuralAnalysisDesc">Thorough stability analysis of existing walls with targeted reinforcement supports</p>
              </div>
            </div>
          </div>
          <div class="space-y-4">
            <div class="flex items-start gap-3">
              <div class="w-6 h-6 bg-amber-400 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                <svg class="w-3 h-3 text-black" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                </svg>
              </div>
              <div>
                <h4 class="font-semibold text-white" data-i18n="home.functionalDesign">Functional Design</h4>
                <p class="text-white/70 text-sm" data-i18n="home.functionalDesignDesc">Safe bicycle parking integrated with comfortable seating areas for community use</p>
              </div>
            </div>
            <div class="flex items-start gap-3">
              <div class="w-6 h-6 bg-amber-400 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                <svg class="w-3 h-3 text-black" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                </svg>
              </div>
              <div>
                <h4 class="font-semibold text-white" data-i18n="home.sustainabilityStatement">Sustainability Statement</h4>
                <p class="text-white/70 text-sm" data-i18n="home.sustainabilityStatementDesc">A functional, safe, and environmentally conscious addition to the village of Doel</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Project Sections Grid -->
  <section class="py-16 px-6 max-w-7xl mx-auto">
    <div class="text-center mb-12" data-aos="fade-up">
      <h2 class="text-4xl md:text-5xl font-bold mb-4" data-i18n="home.projectSectionsTitle">Project Sections</h2>
      <p class="text-white/70 text-lg max-w-2xl mx-auto" data-i18n="home.projectSectionsDescription">
        Navigate through our comprehensive architecture portfolio, organized into four distinct sections
      </p>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      {sections.map((section, index) => (
        <div data-aos="fade-up" data-aos-delay={index * 100}>
          <ProjectCard
            image={section.image}
            title={section.title}
            description={section.description}
            link={section.link}
          />
        </div>
      ))}
    </div>
  </section>
  
  <!-- Footer -->
  <footer class="py-12 px-6 border-t border-white/10">
    <div class="max-w-7xl mx-auto text-center">
      <p class="text-white/60 text-sm" data-i18n="home.footer">
        &copy; 2026 Doel - Scharnierpunt - KU Leuven Architecture Portfolio
      </p>
      <p class="text-white/40 text-xs mt-2">
        doeltreffend.hofkensvermeulen.be
      </p>
    </div>
  </footer>
</BaseLayout>

<script>
  import { getPreferredLanguage, t } from '../i18n/utils';
  
  // Load section card images from S3
  async function loadSectionImages() {
    try {
      const response = await fetch('/api/section-cards');
      if (!response.ok) {
        console.error('Failed to load section card images');
        return;
      }
      
      const data = await response.json();
      
      if (data.images) {
        // Update each section card image
        Object.entries(data.images).forEach(([sectionNum, imageUrl]) => {
          const cards = document.querySelectorAll('.group.relative');
          const cardIndex = parseInt(sectionNum) - 1;
          
          if (cards[cardIndex]) {
            const img = cards[cardIndex].querySelector('img');
            if (img && typeof imageUrl === 'string') {
              img.src = imageUrl;
            }
          }
        });
      }
    } catch (error) {
      console.error('Error loading section card images:', error);
    }
  }
  
  // Update all translations on the page
  function updateTranslations() {
    const currentLang = getPreferredLanguage();
    
    // Update text content
    document.querySelectorAll('[data-i18n]').forEach((el) => {
      const key = (el as HTMLElement).dataset.i18n;
      if (key) {
        el.textContent = t(key, currentLang);
      }
    });
    
    // Update Hero title and subtitle
    const heroTitle = document.querySelector('.hero-section h1');
    const heroSubtitle = document.querySelector('.hero-section p');
    if (heroTitle) heroTitle.textContent = t('home.title', currentLang);
    if (heroSubtitle) heroSubtitle.textContent = t('home.subtitle', currentLang);
  }
  
  // Initialize translations
  updateTranslations();
  
  // Load images from S3
  loadSectionImages();
  
  // Listen for language changes
  window.addEventListener('languagechange', updateTranslations);
</script>

<style>
  /* Pissebedden animations */
  .pissebed {
    display: inline-block;
    font-size: 1.5rem;
    animation: crawl 3s ease-in-out infinite;
    transform-origin: center;
  }
  
  .pissebed-1 {
    animation-delay: 0s;
  }
  
  .pissebed-2 {
    animation-delay: 0.5s;
  }
  
  .pissebed-3 {
    animation-delay: 1s;
  }
  
  @keyframes crawl {
    0%, 100% {
      transform: translateX(0) rotate(0deg);
    }
    25% {
      transform: translateX(5px) rotate(-5deg);
    }
    50% {
      transform: translateX(-3px) rotate(3deg);
    }
    75% {
      transform: translateX(8px) rotate(-3deg);
    }
  }
  
  /* Add some hover effects */
  .pissebed:hover {
    animation-duration: 0.5s;
    transform: scale(1.2);
  }
</style>
